/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/components/app.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ getUpdates)\n/* harmony export */ });\nfunction getUpdates(ambulanceCount) {\n  const map = new google.maps.Map(document.getElementById(\"map\"), {\n    center: {\n      lat: 0,\n      lng: 0\n    },\n    zoom: 8\n  });\n  let markers = [];\n  let ambulances = [];\n\n  google.maps.Map.prototype.clearOverlays = function () {\n    for (var i = 0; i < markers.length; i++) {\n      markers[i].setMap(null);\n    }\n  };\n\n  const delay = ms => new Promise(res => setTimeout(res, ms)); //fake passenger\n\n\n  let ambulance_info = document.querySelector('#ambulance-tracker');\n  console.log(ambulanceCount);\n\n  for (let i = 1; i <= ambulanceCount; i++) {\n    let tr = document.createElement('tr');\n    let amb_info = {\n      'id': i,\n      'lat': 0,\n      'long': 0,\n      'speed': 0.1\n    };\n    ambulances.push(amb_info);\n    let id_cell = document.createElement('td');\n    id_cell.innerHTML = i;\n    let pos_cell = document.createElement('td');\n    pos_cell.innerHTML = '0 , 0';\n    let speed_cell = document.createElement('td');\n    speed_cell.innerHTML = '0.1';\n    tr.appendChild(id_cell);\n    tr.appendChild(pos_cell);\n    tr.appendChild(speed_cell);\n    ambulance_info.appendChild(tr);\n    let marker = new google.maps.Marker({\n      position: {\n        'lat': 0,\n        'lng': 0\n      },\n      map: map\n    });\n    markers.push(marker);\n  }\n\n  ;\n  let info_rows = ambulance_info.childNodes;\n  console.log(info_rows);\n  let dir = [-1, 1];\n  setInterval(async function () {\n    await delay(1000);\n    map.clearOverlays();\n    markers = [];\n\n    for (let i = 1; i <= ambulances.length; i++) {\n      let amb = ambulances[i - 1];\n      let dir_x = dir[Math.floor(Math.random() * dir.length)];\n      let dir_y = dir[Math.floor(Math.random() * dir.length)];\n      let newPosX = amb['lat'] + dir_x * amb['speed'];\n      let newPosY = amb['long'] + dir_y * amb['speed'];\n      amb['lat'] = Math.round(newPosX * 10) / 10;\n      amb['long'] = Math.round(newPosY * 10) / 10;\n      info_rows[i].childNodes[1].innerHTML = newPosX + ' , ' + newPosY;\n      let marker = new google.maps.Marker({\n        position: {\n          'lat': Math.round(newPosX * 10) / 10,\n          'lng': Math.round(newPosY * 10) / 10\n        },\n        map: map\n      });\n      markers.push(marker);\n    }\n\n    ;\n  }, 1000);\n}\n;\n\n//# sourceURL=webpack://frontend/./src/components/app.js?")},"./src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/app */ \"./src/components/app.js\");\n\nvar ambulanceCount = 0;\ndocument.querySelector('#getPositions').addEventListener('click', () => {\n  ambulanceCount = document.querySelector('#ambulance-count').value;\n  (0,_components_app__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(ambulanceCount);\n});\n\n//# sourceURL=webpack://frontend/./src/index.js?")}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var _=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](_,_.exports,__webpack_require__),_.exports}__webpack_require__.d=(e,n)=>{for(var _ in n)__webpack_require__.o(n,_)&&!__webpack_require__.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:n[_]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/index.js")})();